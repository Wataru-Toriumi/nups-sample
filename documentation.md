# nuqs 実装アプリケーション ドキュメント

## 概要

このアプリケーションは、React の状態管理と URL クエリパラメータを連携させるライブラリ「nuqs」を利用した実装例です。ユーザーの入力データを URL のクエリパラメータとして保持することで、ページリロードや URL の共有時にも状態を維持できます。

## 機能

アプリケーションは 3 つの主要コンポーネントから構成されています：

1. **名前コンポーネント**: テキスト入力を受け付け、URL の`name`パラメータに値を保存します
2. **カウントコンポーネント**: 数値入力を受け付け、URL の`count`パラメータに値を保存します
3. **座標コンポーネント**: 緯度・経度の情報を表示し、URL の`lat`と`lng`パラメータに値を保存します

## 使用技術

- React
- TypeScript
- nuqs（URL クエリパラメータ管理ライブラリ）
- CSS（カスタムスタイリング）

## コンポーネント詳細

### 名前コンポーネント（Name.tsx）

```typescript
// useQueryStateフックを使用して、URLクエリパラメータとコンポーネントの状態を連携
const [name, setName] = useQueryState("name");
```

- テキスト入力フィールドに入力すると、URL の`name`パラメータが更新されます
- クリアボタンで入力値を削除できます

### カウントコンポーネント（Counts.tsx）

```typescript
// parseAsIntegerで数値型として解析し、デフォルト値を0に設定
const [count, setCount] = useQueryState("count", parseAsInteger.withDefault(0));
```

- 数値入力フィールドに入力すると、URL の`count`パラメータが更新されます
- クリアボタンで値を削除すると、デフォルト値の 0 に戻ります

### 座標コンポーネント（Coordinates.tsx）

```typescript
// 複数のクエリパラメータを一度に管理
const [coordinates, setCoordinates] = useQueryStates(
  {
    lat: parseAsFloat.withDefault(45.18),
    lng: parseAsFloat.withDefault(5.72),
  },
  {
    history: "push", // 履歴にエントリを追加
  }
);
```

- 緯度（lat）と経度（lng）を URL パラメータとして保持します
- 「新しい座標を生成」ボタンをクリックすると、世界の主要都市（東京、ニューヨーク、ロンドン、パリなど）の周辺のランダムな座標が生成されます
- `history: "push"`オプションにより、座標が変更されるたびにブラウザ履歴に新しいエントリが追加されます

## スタイリング

アプリケーションは独自の CSS スタイルを使用しており、主な特徴は以下の通りです：

- すべてのコンポーネントが統一されたコンテナデザインを持ちます
- 入力フィールドには適切なパディングとボーダーが設定されています
- ボタンはホバー時に色が変化するインタラクティブな設計です
- レスポンシブデザインにより、さまざまな画面サイズに対応します

## 使用方法

1. テキストフィールドに名前を入力すると、URL に`?name=入力した名前`が追加されます
2. 数値フィールドに値を入力すると、URL に`&count=入力した数値`が追加されます
3. 「新しい座標を生成」ボタンをクリックすると、URL に`&lat=XX.XXXX&lng=YY.YYYY`の形式で座標が追加されます
4. この URL を共有すると、受け取った人も同じ状態でアプリケーションを表示できます

## nuqs ライブラリの利点

- URL とアプリケーションの状態を同期させることで、状態の永続化が容易になります
- ページをリロードしても状態が維持されます
- 特定の状態を URL として共有できます
- ブラウザの戻る/進むボタンでアプリケーションの状態を行き来できます

## 拡張可能性

このアプリケーションは以下のように拡張可能です：

1. より複雑なデータ構造を URL パラメータとして保存
2. フィルタリングや検索機能を URL パラメータと連携
3. マルチステップフォームの状態管理
4. ユーザー設定の保存
